{"ast":null,"code":"import { format } from 'date-fns';\n\n// Gerar relat√≥rio di√°rio de atividades\nexport const generateDailyReportWhatsApp = ({\n  cluster,\n  data,\n  tecnico,\n  usina,\n  atividades,\n  tcuComFalha,\n  observacoesGerais\n}) => {\n  const dataFormatada = format(new Date(data), 'dd/MM/yyyy');\n\n  // Gerar linhas de atividades numeradas\n  const linhasAtividades = atividades.map((atividade, index) => {\n    const inicio = atividade.inicio || '--:--';\n    const fim = atividade.fim || '--:--';\n    return `${index + 1}) ${atividade.tarefa} ‚Äì ‚è∞ ${inicio}/${fim}`;\n  }).join('\\n');\n\n  // Gerar observa√ß√µes\n  const observacoes = observacoesGerais.trim() || '-';\n\n  // Gerar status de TCU\n  let statusTCU = 'N√ÉO';\n  if (tcuComFalha.tem && tcuComFalha.falhas.length > 0) {\n    const falhasTexto = tcuComFalha.falhas.filter(falha => falha.skid || falha.tracker).map(falha => {\n      const partes = [];\n      if (falha.skid) partes.push(`Skid: ${falha.skid}`);\n      if (falha.tracker) partes.push(`Tracker: ${falha.tracker}`);\n      return partes.join(' - ');\n    }).join(', ');\n    statusTCU = falhasTexto ? `SIM ‚Äì ${falhasTexto}` : 'SIM';\n  }\n  return `üîÜ *Relat√≥rio Di√°rio ${cluster} ‚Äì ${dataFormatada}*\nüë∑ Equipe: ${tecnico}\nüìç Usina: ${usina}\n\nüîß *Atividades Programadas*\n${linhasAtividades}\n\nüìå *Observa√ß√µes*\n${observacoes}\n\n‚ö° *TCU com falha*\n${statusTCU}`;\n};\n\n// Gerar status t√©cnico por usina\nexport const generateTechnicalStatusWhatsApp = ({\n  usina,\n  data,\n  cluster,\n  tecnico,\n  inversores,\n  strings,\n  trackers,\n  observacoesGerais\n}) => {\n  const dataFormatada = format(new Date(data), 'dd/MM/yyyy');\n\n  // Fun√ß√£o auxiliar para gerar status de subsistema\n  const gerarStatusSubsistema = (subsistema, nome) => {\n    const status = subsistema.ok100 ? 'SIM' : 'N√ÉO';\n    let detalhes = '';\n    if (!subsistema.ok100 && (subsistema.motivo || subsistema.acaoPrevista)) {\n      const partes = [];\n      if (subsistema.motivo) partes.push(`Motivo: ${subsistema.motivo}`);\n      if (subsistema.acaoPrevista) partes.push(`A√ß√£o: ${subsistema.acaoPrevista}`);\n      detalhes = `\\n${partes.join('. ')}`;\n    }\n    return `üîß *${nome}*: ${status}${detalhes}`;\n  };\n  const observacoes = observacoesGerais.trim() || '-';\n  return `üìç *${usina}* ‚Äì ${dataFormatada} ‚Äì ${cluster}\nüë∑ T√©cnico: ${tecnico}\n\n${gerarStatusSubsistema(inversores, 'Inversores')}\n\n${gerarStatusSubsistema(strings, 'Strings')}\n\n${gerarStatusSubsistema(trackers, 'Trackers')}\n\nüìù Observa√ß√µes: ${observacoes}`;\n};\n\n// Gerar status t√©cnico consolidado por cluster\nexport const generateConsolidatedTechnicalStatusWhatsApp = (statusTecnicoArray, cluster, data) => {\n  const dataFormatada = format(new Date(data), 'dd/MM/yyyy');\n  const blocosPorUsina = statusTecnicoArray.map(status => generateTechnicalStatusWhatsApp(status)).join('\\n\\n');\n  return `üóÇÔ∏è *Status T√©cnico ‚Äì ${cluster} ‚Äì ${dataFormatada}*\n\n${blocosPorUsina}`;\n};\n\n// Fun√ß√£o auxiliar para formatar data\nexport const formatDateForWhatsApp = date => {\n  return format(new Date(date), 'dd/MM/yyyy');\n};\n\n// Fun√ß√£o auxiliar para validar dados antes de gerar mensagem\nexport const validateDataForWhatsApp = (data, type) => {\n  const errors = [];\n  if (!data.cluster) errors.push('Cluster √© obrigat√≥rio');\n  if (!data.data) errors.push('Data √© obrigat√≥ria');\n  if (!data.usina) errors.push('Usina √© obrigat√≥ria');\n  if (!data.tecnico) errors.push('T√©cnico √© obrigat√≥rio');\n  if (type === 'daily' && (!data.atividades || data.atividades.length === 0)) {\n    errors.push('Pelo menos uma atividade √© obrigat√≥ria');\n  }\n  if (type === 'technical' && (!data.inversores || !data.strings || !data.trackers)) {\n    errors.push('Status de todos os subsistemas √© obrigat√≥rio');\n  }\n  return errors;\n};","map":{"version":3,"names":["format","generateDailyReportWhatsApp","cluster","data","tecnico","usina","atividades","tcuComFalha","observacoesGerais","dataFormatada","Date","linhasAtividades","map","atividade","index","inicio","fim","tarefa","join","observacoes","trim","statusTCU","tem","falhas","length","falhasTexto","filter","falha","skid","tracker","partes","push","generateTechnicalStatusWhatsApp","inversores","strings","trackers","gerarStatusSubsistema","subsistema","nome","status","ok100","detalhes","motivo","acaoPrevista","generateConsolidatedTechnicalStatusWhatsApp","statusTecnicoArray","blocosPorUsina","formatDateForWhatsApp","date","validateDataForWhatsApp","type","errors"],"sources":["/home/thiagoriva/Documents/Projects/daily-report/src/utils/whatsappGenerator.js"],"sourcesContent":["import { format } from 'date-fns';\n\n// Gerar relat√≥rio di√°rio de atividades\nexport const generateDailyReportWhatsApp = ({ \n  cluster, \n  data, \n  tecnico, \n  usina, \n  atividades, \n  tcuComFalha, \n  observacoesGerais \n}) => {\n  const dataFormatada = format(new Date(data), 'dd/MM/yyyy');\n  \n  // Gerar linhas de atividades numeradas\n  const linhasAtividades = atividades\n    .map((atividade, index) => {\n      const inicio = atividade.inicio || '--:--';\n      const fim = atividade.fim || '--:--';\n      return `${index + 1}) ${atividade.tarefa} ‚Äì ‚è∞ ${inicio}/${fim}`;\n    })\n    .join('\\n');\n\n  // Gerar observa√ß√µes\n  const observacoes = observacoesGerais.trim() || '-';\n\n  // Gerar status de TCU\n  let statusTCU = 'N√ÉO';\n  if (tcuComFalha.tem && tcuComFalha.falhas.length > 0) {\n    const falhasTexto = tcuComFalha.falhas\n      .filter(falha => falha.skid || falha.tracker)\n      .map(falha => {\n        const partes = [];\n        if (falha.skid) partes.push(`Skid: ${falha.skid}`);\n        if (falha.tracker) partes.push(`Tracker: ${falha.tracker}`);\n        return partes.join(' - ');\n      })\n      .join(', ');\n    \n    statusTCU = falhasTexto ? `SIM ‚Äì ${falhasTexto}` : 'SIM';\n  }\n\n  return `üîÜ *Relat√≥rio Di√°rio ${cluster} ‚Äì ${dataFormatada}*\nüë∑ Equipe: ${tecnico}\nüìç Usina: ${usina}\n\nüîß *Atividades Programadas*\n${linhasAtividades}\n\nüìå *Observa√ß√µes*\n${observacoes}\n\n‚ö° *TCU com falha*\n${statusTCU}`;\n};\n\n// Gerar status t√©cnico por usina\nexport const generateTechnicalStatusWhatsApp = ({ \n  usina, \n  data, \n  cluster, \n  tecnico, \n  inversores, \n  strings, \n  trackers, \n  observacoesGerais \n}) => {\n  const dataFormatada = format(new Date(data), 'dd/MM/yyyy');\n  \n  // Fun√ß√£o auxiliar para gerar status de subsistema\n  const gerarStatusSubsistema = (subsistema, nome) => {\n    const status = subsistema.ok100 ? 'SIM' : 'N√ÉO';\n    let detalhes = '';\n    \n    if (!subsistema.ok100 && (subsistema.motivo || subsistema.acaoPrevista)) {\n      const partes = [];\n      if (subsistema.motivo) partes.push(`Motivo: ${subsistema.motivo}`);\n      if (subsistema.acaoPrevista) partes.push(`A√ß√£o: ${subsistema.acaoPrevista}`);\n      detalhes = `\\n${partes.join('. ')}`;\n    }\n    \n    return `üîß *${nome}*: ${status}${detalhes}`;\n  };\n\n  const observacoes = observacoesGerais.trim() || '-';\n\n  return `üìç *${usina}* ‚Äì ${dataFormatada} ‚Äì ${cluster}\nüë∑ T√©cnico: ${tecnico}\n\n${gerarStatusSubsistema(inversores, 'Inversores')}\n\n${gerarStatusSubsistema(strings, 'Strings')}\n\n${gerarStatusSubsistema(trackers, 'Trackers')}\n\nüìù Observa√ß√µes: ${observacoes}`;\n};\n\n// Gerar status t√©cnico consolidado por cluster\nexport const generateConsolidatedTechnicalStatusWhatsApp = (statusTecnicoArray, cluster, data) => {\n  const dataFormatada = format(new Date(data), 'dd/MM/yyyy');\n  \n  const blocosPorUsina = statusTecnicoArray\n    .map(status => generateTechnicalStatusWhatsApp(status))\n    .join('\\n\\n');\n\n  return `üóÇÔ∏è *Status T√©cnico ‚Äì ${cluster} ‚Äì ${dataFormatada}*\n\n${blocosPorUsina}`;\n};\n\n// Fun√ß√£o auxiliar para formatar data\nexport const formatDateForWhatsApp = (date) => {\n  return format(new Date(date), 'dd/MM/yyyy');\n};\n\n// Fun√ß√£o auxiliar para validar dados antes de gerar mensagem\nexport const validateDataForWhatsApp = (data, type) => {\n  const errors = [];\n  \n  if (!data.cluster) errors.push('Cluster √© obrigat√≥rio');\n  if (!data.data) errors.push('Data √© obrigat√≥ria');\n  if (!data.usina) errors.push('Usina √© obrigat√≥ria');\n  if (!data.tecnico) errors.push('T√©cnico √© obrigat√≥rio');\n  \n  if (type === 'daily' && (!data.atividades || data.atividades.length === 0)) {\n    errors.push('Pelo menos uma atividade √© obrigat√≥ria');\n  }\n  \n  if (type === 'technical' && (!data.inversores || !data.strings || !data.trackers)) {\n    errors.push('Status de todos os subsistemas √© obrigat√≥rio');\n  }\n  \n  return errors;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}